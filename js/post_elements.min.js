$(document).ready(function(){var t='<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> ',e='<span class="glyphicon glyphicon-ok" aria-hidden="true"></span> ',s='<span class="glyphicon glyphicon-alert" aria-hidden="true"></span> ';function o(t){$("#post_elements_div").html(""),$("#loading").show(),$("#post_elements_div").load("../npr/post_elements?u="+t,function(){$("#loading").hide()})}$('[data-toggle="tooltip"]').tooltip(),$(".mb_post_wall_reply_button").click(function(){var t=$(this).attr("post_id");$(".send_reply_post_wall_form_"+t).toggle()}),$(".mb_post_wall_send_reply_button").click(function(){var e=this,i=$(e).attr("post_id"),n=$(e).attr("type"),a=$("#post_reply_textarea_"+i).val(),l=$("#profile_id_hidden").val();if(""!=(a=a.trim())){var r=document.getElementById("post_reply_textarea_"+i);e.disabled=!0,r.disabled=!0,$.post("../action",{action:"mb_post_wall_send_reply",post_id:i,content:a},function(i,a){if(e.disabled=!1,r.disabled=!1,"success"==a){var d=$.parseJSON(i).status;"SUCCESS"==d?"all_post"==n?o(l):"one_post"==n&&location.reload():"POST_WALL_REPLY_DISABLED"==d?$.bootstrapGrowl(t+"Désolé, mais le service des réponses aux posts est actuellement indisponible. Merci de réessayer plus tard.",{type:"danger",width:"auto",allow_dismiss:!1}):"TOO_FAST"==d?$.bootstrapGrowl(s+"Hé ! Tu vas un petit peu vite là. <strong>Réessaie dans quelques secondes</strong>.",{type:"warning",width:"auto",allow_dismiss:!1}):$.bootstrapGrowl(t+"Une erreur inconnue s'est produite.",{type:"danger",width:"auto",allow_dismiss:!1})}else $.bootstrapGrowl(t+"Désolé mais le serveur est <strong>indisponible</strong>.",{type:"danger",width:"auto",allow_dismiss:!1})})}else $.bootstrapGrowl(t+"Tu dois écrire quelque chose.",{type:"danger",width:"auto",allow_dismiss:!1})}),$(".mb_likes_dislikes_post").click(function(){var e=this,o=$(e).attr("post_id"),i=$(e).attr("type");e.disabled=!0,$.post("../action",{action:"likes_dislikes_post_wall",post_id:o,type:i},function(i,n){if(e.disabled=!1,"success"==n){var a=$.parseJSON(i),l=a.status;if("SUCCESS"==l){var r=a.type_like,d=a.revert;if("plus_like"==r){if("true"==d){var p=document.getElementById("number_of_dislikes_span_"+o).innerHTML;document.getElementById("number_of_dislikes_span_"+o).innerHTML=+p-1}var _=document.getElementById("number_of_likes_span_"+o).innerHTML;document.getElementById("number_of_likes_span_"+o).innerHTML=+_+1}else if("plus_dislike"==r){if("true"==d){_=document.getElementById("number_of_likes_span_"+o).innerHTML;document.getElementById("number_of_likes_span_"+o).innerHTML=+_-1}p=document.getElementById("number_of_dislikes_span_"+o).innerHTML;document.getElementById("number_of_dislikes_span_"+o).innerHTML=+p+1}else if("delete_like"==r){_=document.getElementById("number_of_likes_span_"+o).innerHTML;document.getElementById("number_of_likes_span_"+o).innerHTML=+_-1}else if("delete_dislike"==r){p=document.getElementById("number_of_dislikes_span_"+o).innerHTML;document.getElementById("number_of_dislikes_span_"+o).innerHTML=+p-1}}else"TOO_FAST"==l?$.bootstrapGrowl(s+"Hé ! Tu vas un petit peu vite là. <strong>Réessaie dans quelques secondes</strong>.",{type:"warning",width:"auto",allow_dismiss:!1}):"LIKES_DISLIKES_DISABLED"==l?$.bootstrapGrowl(t+"Désolé, mais le service de J'aime et de Je n'aime pas est actuellement indisponible. Merci de réessayer plus tard.",{type:"danger",width:"auto",allow_dismiss:!1}):$.bootstrapGrowl(t+"Une erreur inconnue s'est produite.",{type:"danger",width:"auto",allow_dismiss:!1})}else $.bootstrapGrowl(t+"Désolé mais le serveur est <strong>indisponible</strong>.",{type:"danger",width:"auto",allow_dismiss:!1})})}),$("a[modal_type=delete_content]").click(function(){if(void 0!==$(this).data("content_id")&&void 0!==$(this).data("type")){var t=$(this).data("content_id"),e=$(this).data("type");$("#delete_content_id_hidden").val(t),$("#delete_type_hidden").val(e)}}),$("#mb_delete_content_button").click(function(){var i=this,n=$("#delete_content_id_hidden").val(),a=$("#delete_type_hidden").val(),l=$(i).attr("location_type"),r=$("#profile_id_hidden").val();i.disabled=!0,$.post("../action",{action:"delete_post_wall",content_id:n,type:a},function(d,p){if(i.disabled=!1,"success"==p){var _=$.parseJSON(d).status;"SUCCESS"==_?"post_wall"==a?(document.getElementById("post_form_"+n).remove(),$("#delete_content_modal").modal("hide"),$.bootstrapGrowl(e+"La publication a été supprimée.",{type:"success",width:"auto",allow_dismiss:!1})):"reply_post_wall"==a&&($("#delete_content_modal").modal("hide"),$.bootstrapGrowl(e+"Ta réponse a été supprimée.",{type:"success",width:"auto",allow_dismiss:!1}),"all_post"==l?o(r):"one_post"==l&&location.reload()):"TOO_FAST"==_?$.bootstrapGrowl(s+"Hé ! Tu vas un petit peu vite là. <strong>Réessaie dans quelques secondes</strong>.",{type:"warning",width:"auto",allow_dismiss:!1}):"POST_WALL_DISABLED"==_?$.bootstrapGrowl(t+"Désolé, mais le service des publication est actuellement indisponible. Merci de réessayer plus tard.",{type:"danger",width:"auto",allow_dismiss:!1}):$.bootstrapGrowl(t+"Une erreur inconnue s'est produite.",{type:"danger",width:"auto",allow_dismiss:!1})}else $.bootstrapGrowl(t+"Désolé mais le serveur est <strong>indisponible</strong>.",{type:"danger",width:"auto",allow_dismiss:!1})})}),$(".mb_copy_link_button").click(function(){var t,s,o=$(this).attr("post_link");t=o,(s=document.createElement("textarea")).style.position="fixed",s.style.top=0,s.style.left=0,s.style.width="2em",s.style.height="2em",s.style.padding=0,s.style.border="none",s.style.outline="none",s.style.boxShadow="none",s.style.background="transparent",s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),$.bootstrapGrowl(e+"Le lien de cette publication a été copié.",{type:"success",width:"auto",allow_dismiss:!1})}),$("a[modal_type=report_post]").click(function(){if(void 0!==$(this).data("post_id")&&void 0!==$(this).data("report_type")){var t=$(this).data("report_type"),e=$(this).data("post_id");$("#report_post_id").val(e),$("#report_type").val(t)}}),$("#confirm_report_post_button").click(function(){var o=$("#report_info_textarea").val();o=o.trim();var i=$("#report_post_id").val(),n=$("#report_type").val(),a=document.getElementById("confirm_report_post_button");a.disabled=!0,$.post("../action",{action:"mb_report",content_id:i,type:n,info:o},function(o,i){if(a.disabled=!1,"success"==i){var n=$.parseJSON(o).status;"SUCCESS"==n?($("#report_info_textarea").val(""),$("#report_post").modal("hide"),$.bootstrapGrowl(e+"Merci, ton signalement a été enregistré.",{type:"success",width:"auto",allow_dismiss:!1})):"ALREADY_SENT"==n?($("#report_post").modal("hide"),$.bootstrapGrowl(t+"Tu as déjà envoyé un signalement sur ce post, <strong>inutile</strong> d'en re-envoyer un.",{type:"danger",width:"auto",allow_dismiss:!1})):"REPORT_DISABLED"==n?$.bootstrapGrowl(t+"Désolé, mais le service de signalement est actuellement indisponible. Merci de réessayer plus tard.",{type:"danger",width:"auto",allow_dismiss:!1}):"TOO_FAST"==n?$.bootstrapGrowl(s+"Hé ! Tu vas un petit peu vite là. <strong>Réessaie dans quelques secondes</strong>.",{type:"warning",width:"auto",allow_dismiss:!1}):$.bootstrapGrowl(t+"Une erreur inconnue s'est produite.",{type:"danger",width:"auto",allow_dismiss:!1})}else $.bootstrapGrowl(t+"Désolé mais le serveur est <strong>indisponible</strong>.",{type:"danger",width:"auto",allow_dismiss:!1})})}),$(".mb_pin_post_button").click(function(){var e=this,i=$(e).attr("post_id"),n=$(e).attr("type"),a=$("#profile_id_hidden").val();e.disabled=!0,$.post("../action",{action:"mb_pin_post",post_id:i,type:n},function(i,n){if(e.disabled=!1,"success"==n){var l=$.parseJSON(i).status;"SUCCESS"==l?o(a):"PIN_POST_DISABLED"==l?$.bootstrapGrowl(t+"Désolé, mais le service d'épingler des publications est actuellement indisponible. Merci de réessayer plus tard.",{type:"danger",width:"auto",allow_dismiss:!1}):"TOO_FAST"==l?$.bootstrapGrowl(s+"Hé ! Tu vas un petit peu vite là. <strong>Réessaie dans quelques secondes</strong>.",{type:"warning",width:"auto",allow_dismiss:!1}):$.bootstrapGrowl(t+"Une erreur inconnue s'est produite.",{type:"danger",width:"auto",allow_dismiss:!1})}else $.bootstrapGrowl(t+"Désolé mais le serveur est <strong>indisponible</strong>.",{type:"danger",width:"auto",allow_dismiss:!1})})}),$(".change_page_post").click(function(){var t=$(this).attr("link");$("#post_elements_div").html(""),$("#loading").show(),$("#post_elements_div").load("../npr/"+t,function(){$("#loading").hide()})}),$(".change_view_post_nav_tabs").click(function(){if("only_user"==$(this).attr("type"))var t=2;else t=1;var e=$(this).attr("link")+"&vp="+t;$("#post_elements_div").html(""),$("#loading").show(),$("#post_elements_div").load("../npr/"+e,function(){$("#loading").hide()})}),$(".mb_update_post_wall_notification_settings_button").click(function(){var o=this,i=$(o).attr("post_id");$(o).attr("type");o.disabled=!0,$.post("../action",{action:"mb_update_post_wall_notification_settings",post_id:i},function(n,a){if(o.disabled=!1,"success"==a){var l=$.parseJSON(n),r=l.status;if("SUCCESS"==r){var d=l.notification;"DISABLE"==d?(document.getElementById("update_post_wall_notification_button_"+i).innerHTML="Activer les notifications",$.bootstrapGrowl(e+"Les notifications relatives à cette publication ont été <strong>désactivées</strong>.",{type:"success",width:"auto",allow_dismiss:!1})):(d="ENABLE")&&(document.getElementById("update_post_wall_notification_button_"+i).innerHTML="Désactiver les notifications",$.bootstrapGrowl(e+"Les notifications relatives à cette publication ont été <strong>activées</strong>.",{type:"success",width:"auto",allow_dismiss:!1}))}else"TOO_FAST"==r?$.bootstrapGrowl(s+"Hé ! Tu vas un petit peu vite là. <strong>Réessaie dans quelques secondes</strong>.",{type:"warning",width:"auto",allow_dismiss:!1}):$.bootstrapGrowl(t+"Une erreur inconnue s'est produite.",{type:"danger",width:"auto",allow_dismiss:!1})}else $.bootstrapGrowl(t+"Désolé mais le serveur est <strong>indisponible</strong>.",{type:"danger",width:"auto",allow_dismiss:!1})})}),$(".delete_post_id_button").click(function(){var s=this,o=$(s).attr("post_id");s.disabled=!0,$.post("https://acoustical-kettles.000webhostapp.com/action",{action:"admin_delete_post",post_id:o},function(i,n){(s.disabled=!1,"success"==n)?"SUCCESS"==$.parseJSON(i).status?(document.getElementById("post_form_"+o).remove(),$.bootstrapGrowl(e+"La publication a bien été <strong>supprimée</strong>.",{type:"success",width:"auto",allow_dismiss:!1})):$.bootstrapGrowl(t+"Une erreur inconnue s'est produite.",{type:"danger",width:"auto",allow_dismiss:!1}):$.bootstrapGrowl(t+"Désolé mais le serveur est <strong>indisponible</strong>.",{type:"danger",width:"auto",allow_dismiss:!1})})})});